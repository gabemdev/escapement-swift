# Escapement Swift

Render `NSAttributedString`s from the JSON structure generated by [escapement-rb](https://github.com/hodinkee/escapement-rb).

## Building

```sh
$ git clone https://github.com/hodinkee/escapement-swift
$ cd escapement-swift
$ carthage bootstrap
$ open Escapement.xcodeproj
```

## Installation

- [Carthage](https://github.com/carthage/carthage): `github "hodinkee/escapement-swift"`

## Usage

Escapement exposes two core types: `Document` and `Stylesheet`.

`Document`s can be converted from `JSON` using `DocumentDecoder`: `DocumentDecoder.decode(JSON)` and converted to `JSON` using `DocumentEncoder`: `DocumentEncoder.encode(document)`.

Now you can render an `NSAttributedString` with the following:

```swift
let stylesheet = Styleheet(rules: [
    Styleheet.Rule(selector: "*", attributes: [ NSFontAttributeName: UIFont(name: "TiemposText-Regular", size: 18)! ]),
    Styleheet.Rule(selector: "*", attributes: [ NSForegroundColorAttributeName: Theme.darkTextColor() ]),
    Styleheet.Rule(selectors: [ "s", "del" ], attributes: [ "TTTStrikeOutAttribute": NSUnderlineStyle.StyleSingle.rawValue ]),
    Styleheet.Rule(selector: "mark", attributes: [ NSBackgroundColorAttributeName: colorWithHex(0xEEEEEE) ])
])
let attributedString = document?.attributedStringWithStylesheet(stylesheet)
```

A `Stylesheet` allows you to decorate HTML markup with `NSAttributedString` attributes. Any attributes applied to the `*` selector are given to the attributed string upon initialization before other rules are applied. Attributes are computed for a given selector by performing a distinct union of all attributes that match that selector in the stylesheet.

Escapement will render `a`, `strong`, `b`, `em`, `i`, `s`, and `del` tags by default.
